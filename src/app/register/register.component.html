<div class="p-4">
  <H1>Register</H1>
  <form [formGroup]="registerForm"
        (ngSubmit)="onSubmit()">

    <div class="form-group row">
      <label for="username"
             class="control-label col-md-3 col-form-label">
        Username:</label>
      <input type="text"
             required
             class="form-control col-md-7"
             id="username"
             formControlName="username"
      >
      <div *ngIf="submitted && username.invalid && (username.dirty || username.touched)" class="text-danger p-3">
        <div *ngIf="username.errors?.required">Username is required</div>
        <!--<div *ngIf="username.errors?.appCheckUsername">Username is taken</div>-->
      </div>
      <div *ngIf="username.errors?.UsernameTaken" class="text-danger p-3">Sorry, that username is taken</div>
    </div>


    <div class="form-group row">
      <label for="email"
             class="control-label col-md-3 col-form-label">
        Email:</label>
      <input type="email"
             email
             required
             class="form-control col-md-7"
             id="email"
             formControlName="email"
      >
      <div *ngIf="submitted && email.invalid" class="text-danger p-3">
        <div *ngIf="email.errors.required">Email is required</div>
        <div *ngIf="email.errors.email">Please provide a valid email address</div>
      </div>
    </div>


    <div
    >
      <div class="form-group row">
        <label for="password1"
               class="control-label col-md-3 col-form-label">
          Password:</label>
        <input type="password"
               required
               class="form-control col-md-7"
               id="password1"
               formControlName="password1"
               minlength="8"
        >

        <div *ngIf="submitted && f.password1.invalid" class="text-danger">
          <div *ngIf="f.password1.errors?.required">Password is required</div>
          <!--<div *ngIf="f.password1.errors?.minlength">Password must be 10 or more characters</div>-->
        </div>

        <div class="p-3">Requirements:
          <ul><li [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('minlength') ? 'text-danger': 'text-success'">at least 10 characters long</li>
            <li [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasNumber') ? 'text-danger': 'text-success'">
          at least 1 number,
        </li><li [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasCapitalCase') ? 'text-danger': 'text-success'">
          at least 1 uppercase letter,
        </li><li [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasSmallCase') ? 'text-danger': 'text-success'">
          at least 1 lowercase letter
        </li></ul>
        </div>

        <!--<div [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasNumber') ? 'text-danger': 'text-success'">-->
          <!--Must have at least 1 number!-->
        <!--</div>-->
        <!--<div [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasCapitalCase') ? 'text-danger': 'text-success'">-->
          <!--Must have at least 1 uppercase letter!-->
        <!--</div>-->
        <!--<div [ngClass]="registerForm.controls['password1'].hasError('required') || registerForm.controls['password1'].hasError('hasSmallCase') ? 'text-danger': 'text-success'">-->
          <!--Must have at least 1 lowercase letter!-->
        <!--</div>-->

      </div>

      <div class="form-group row">
        <label for="password2"
               class="control-label col-md-3 col-form-label">
          Confirm Password:</label>
        <input type="password"
               required
               class="form-control col-md-7"
               id="password2"
               formControlName="password2"
               minlength="8"
        >

        <!--todo figure out the error with pattern change-->
        <div *ngIf="submitted && f.password2.invalid" class="text-danger p-3">
          <div *ngIf="f.password2.errors?.required">Password is required</div>

        </div>
        <div class="text-danger" *ngIf="registerForm.controls['password2'].hasError('NoPasswordMatch')">Passwords must match</div>

      </div>


    </div>


    <div class="form-buttons">
      <button type="submit" class="button btn btn-primary"
      >Register
      </button>
    </div>


  </form>

</div>
